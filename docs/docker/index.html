
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://santisbon.github.io/reference/docker/">
      
      
      
        <link rel="next" href="../k8s/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.14">
    
    
      
        <title>Docker - Notes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Notes" class="md-header__button md-logo" aria-label="Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Docker
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.04 7 9.54 0 4.5-2.94 8.27-7 9.54.95.3 1.95.46 3 .46a10 10 0 0 0 10-10A10 10 0 0 0 9 2Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/santisbon/reference" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Notes" class="md-nav__button md-logo" aria-label="Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Notes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/santisbon/reference" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Homelab
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Homelab
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Docker
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    <span class="md-ellipsis">
      Install
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Install">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#macos" class="md-nav__link">
    <span class="md-ellipsis">
      macOS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-raspberry-pi-os" class="md-nav__link">
    <span class="md-ellipsis">
      Linux / Raspberry Pi OS:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use" class="md-nav__link">
    <span class="md-ellipsis">
      Use
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Use">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k8s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rpi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Raspberry Pi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k3s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K3s
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rook-ceph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rook Ceph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../microk8s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MicroK8s
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../microceph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MicroCeph
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    New dev machine
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            New dev machine
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install-os/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install the OS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../automated/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automated setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtualization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-mgmt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Package Manager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utilities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utilities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../editor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Editor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mkdocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MkDocs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    <span class="md-ellipsis">
      Install
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Install">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#macos" class="md-nav__link">
    <span class="md-ellipsis">
      macOS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-raspberry-pi-os" class="md-nav__link">
    <span class="md-ellipsis">
      Linux / Raspberry Pi OS:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use" class="md-nav__link">
    <span class="md-ellipsis">
      Use
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Use">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="docker">Docker<a class="headerlink" href="#docker" title="Permanent link">#</a></h1>
<h2 id="install">Install<a class="headerlink" href="#install" title="Permanent link">#</a></h2>
<h3 id="macos">macOS<a class="headerlink" href="#macos" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>brew<span class="w"> </span>install<span class="w"> </span>--cask<span class="w"> </span>docker
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You must use the --cask version. Otherwise only the client is included and can't run the Docker daemon. Then open the Docker app and grant privileged access when asked. Only then will you be able to use <code>docker</code>.</p>
</div>
<h3 id="linux-raspberry-pi-os">Linux / Raspberry Pi OS:<a class="headerlink" href="#linux-raspberry-pi-os" title="Permanent link">#</a></h3>
<p>If you just ran <code>apt upgrade</code> on your Raspberry Pi, reboot before installing Docker.<br />
Follow the appropriate <a href="https://docs.docker.com/engine/install/debian/#install-using-the-convenience-script">installation method</a>.  </p>
<p>If you don't want to have to prefix commands with <code>sudo</code> add your user to the <code>docker</code> group. This is equivalent to giving that user root privileges.
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>/etc/group<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>docker<span class="w"> </span><span class="c1"># see if docker group exists</span>
sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>docker<span class="w"> </span><span class="nv">$USER</span>
</code></pre></div></p>
<p>Follow <a href="https://docs.docker.com/engine/install/linux-postinstall/">Post-installation steps</a> to configure log rotation.  </p>
<h2 id="use">Use<a class="headerlink" href="#use" title="Permanent link">#</a></h2>
<h3 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">#</a></h3>
<p><a href="https://github.com/docker-library/official-images#architectures-other-than-amd64">Supported Architectures</a><br />
<a href="https://github.com/containerd/containerd/blob/v1.4.3/platforms/platforms.go#L63">Platform specifiers</a>  </p>
<table>
<thead>
<tr>
<th style="text-align: center;">Value</th>
<th style="text-align: center;">Normalized</th>
<th style="text-align: center;">Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">aarch64</td>
<td style="text-align: center;">arm64</td>
<td style="text-align: center;">Apple M1/M2, Raspberry Pi 4</td>
</tr>
<tr>
<td style="text-align: center;">armhf</td>
<td style="text-align: center;">arm</td>
<td style="text-align: center;">Raspberry Pi 2</td>
</tr>
<tr>
<td style="text-align: center;">armel</td>
<td style="text-align: center;">arm/v6</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">i386</td>
<td style="text-align: center;">386</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">x86_64</td>
<td style="text-align: center;">amd64</td>
<td style="text-align: center;">Intel (Default)</td>
</tr>
<tr>
<td style="text-align: center;">x86-64</td>
<td style="text-align: center;">amd64</td>
<td style="text-align: center;">Intel (Default)</td>
</tr>
</tbody>
</table>
<p>Docker Desktop for Apple silicon can run (or build) an Intel image using emulation.<br />
The <code>--platform</code> option sets the platform if server is multi-platform capable.  </p>
<p>Macbook <strong>M1/M2</strong> is based on <strong>ARM</strong>. The Docker host is detected as <strong>linux/arm64/v8</strong> by Docker.  </p>
<p>On a Macbook M1/M2 running a native arm64 linux image instead of an amd64 (x86-64 Intel) image with emulation:<br />
When installing apps on the container either install the package for the ARM platform if they provide one, or run an amd64 docker image (Docker will use emulation). </p>
<p>See Docker host info.<br />
You need to use the real field names (not display names) so we'll grab the info in json to get the real field names and use <code>jq</code> to display it nicely. Then we'll render them using Go templates.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>info<span class="w"> </span>--format<span class="w"> </span><span class="s1">&#39;{{json .}}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>.

docker<span class="w"> </span>info<span class="w"> </span>--format<span class="w"> </span><span class="s2">&quot;{{.Plugins.Volume}}&quot;</span>
docker<span class="w"> </span>info<span class="w"> </span>--format<span class="w"> </span><span class="s2">&quot;{{.OSType}} - {{.Architecture}} CPUs: {{.NCPU}}&quot;</span>
</code></pre></div>
<p>With the default images, Docker Desktop for Apple silicon warns us the requested image's platform (linux/amd64) is different from the detected host platform (linux/arm64/v8) and no specific platform was requested.<br />
<code>--platform linux/amd64</code> is the default and the same as  <code>--platform linux/x86_64</code>. It runs (or builds) an Intel image.<br />
<code>--platform linux/arm64</code> runs (or builds) an aarch64 (arm64) image. Architecture used by Appple M1/M2.  </p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>container1<span class="w"> </span>debian<span class="w"> </span><span class="c1"># WARNING. uname -m -&gt; x86_64 (amd64)</span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--platform<span class="w"> </span>linux/amd64<span class="w"> </span>--name<span class="w"> </span>container1<span class="w"> </span>debian<span class="w"> </span><span class="c1"># NO warning. uname -m -&gt; x86_64 (amd64). On Mac it emulates Intel.</span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--platform<span class="w"> </span>linux/arm64<span class="w"> </span>--name<span class="w"> </span>container1<span class="w"> </span>debian<span class="w"> </span><span class="c1"># NO warning. uname -m -&gt; aarch64 (arm64). Mac native.</span>

<span class="c1"># On a Mac M2 you can also use this image</span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>mycontainer<span class="w"> </span>arm64v8/debian<span class="w"> </span>bash<span class="w"> </span><span class="c1"># NO warning. uname -m -&gt; aarch64 (arm64). Mac native.</span>
</code></pre></div>
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">#</a></h3>
<p>Dockerfile instruction to keep a container running
<div class="highlight"><pre><span></span><code>CMD<span class="w"> </span>tail<span class="w"> </span>-f<span class="w"> </span>/dev/null
</code></pre></div></p>
<p>Running containers
<div class="highlight"><pre><span></span><code><span class="c1"># sanity check</span>
docker<span class="w"> </span>version
docker<span class="w"> </span>--help

<span class="c1"># &quot;docker run&quot; = &quot;docker container run&quot;</span>

docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>container1<span class="w"> </span>debian<span class="w"> </span><span class="c1"># created and Exited</span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>container2<span class="w"> </span>debian<span class="w"> </span><span class="c1"># created and Up. Interactive tty</span>
docker<span class="w"> </span>run<span class="w"> </span>--detach<span class="w"> </span>--name<span class="w"> </span>container3<span class="w"> </span>debian<span class="w"> </span><span class="c1"># created and Exited</span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--detach<span class="w"> </span>--name<span class="w"> </span>container4<span class="w"> </span>debian<span class="w"> </span><span class="c1"># created and Up. Running in background</span>

docker<span class="w"> </span>stop<span class="w"> </span>container4<span class="w"> </span><span class="c1"># Exited</span>
docker<span class="w"> </span>restart<span class="w"> </span>container4<span class="w"> </span><span class="c1"># Up</span>
docker<span class="w"> </span>attach<span class="w"> </span>container4<span class="w"> </span><span class="c1"># Interactive tty</span>

<span class="c1"># To have it removed automatically when it&#39;s stopped </span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>--name<span class="w"> </span>mycontainer<span class="w"> </span>debian<span class="w"> </span><span class="c1"># created and Up. Interactive tty. </span>
<span class="c1"># Run bash in a new container with interactive tty, based on debian image.</span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>mycontainer<span class="w"> </span>debian<span class="w"> </span>bash
<span class="c1"># Get the IDs of all stopped containers. Options: all, quiet (only IDs), filter.</span>
docker<span class="w"> </span>ps<span class="w"> </span>-aq<span class="w"> </span>-f<span class="w"> </span><span class="nv">status</span><span class="o">=</span>exited
</code></pre></div></p>
<p>Working with images and volumes
<div class="highlight"><pre><span></span><code><span class="c1"># Show all images (including intermediate images)</span>
docker<span class="w"> </span>image<span class="w"> </span>ls<span class="w"> </span>-a

<span class="c1"># Build an image from a Dockerfile and give it a name (or name:tag).</span>
docker<span class="w"> </span>build<span class="w"> </span>-f<span class="w"> </span>mydockerfile<span class="w"> </span>-t<span class="w"> </span>santisbon/myimage<span class="w"> </span>.
docker<span class="w"> </span>builder<span class="w"> </span>prune<span class="w"> </span>-a<span class="w">     </span><span class="c1"># Remove all unused build cache, not just dangling ones</span>
docker<span class="w"> </span>image<span class="w"> </span>rm<span class="w"> </span>santisbon/myimage

<span class="c1"># Volumes</span>
docker<span class="w"> </span>volume<span class="w"> </span>create<span class="w"> </span>my-vol
docker<span class="w"> </span>volume<span class="w"> </span>ls
docker<span class="w"> </span>volume<span class="w"> </span>inspect<span class="w"> </span>my-vol
docker<span class="w"> </span>volume<span class="w"> </span>prune
docker<span class="w"> </span>volume<span class="w"> </span>rm<span class="w"> </span>my-vol

<span class="c1"># Start a container from an image.</span>
docker<span class="w"> </span>run<span class="w"> </span><span class="se">\</span>
--name<span class="w"> </span>mycontainer<span class="w"> </span><span class="se">\</span>
--hostname<span class="w"> </span>mycontainer<span class="w"> </span><span class="se">\</span>
--mount<span class="w"> </span><span class="nv">source</span><span class="o">=</span>my-vol,target<span class="o">=</span>/data<span class="w"> </span><span class="se">\</span>
santisbon/myimage

<span class="c1"># Get rid of all stopped containers. Options: remove **anonymous volumes** associated with the container.</span>
docker<span class="w"> </span>rm<span class="w"> </span>-v<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-aq<span class="w"> </span>-f<span class="w"> </span><span class="nv">status</span><span class="o">=</span>exited<span class="k">)</span>
<span class="c1"># You might want to make an alias:</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">drm</span><span class="o">=</span><span class="s1">&#39;docker rm -v $(docker ps -aq -f status=exited)&#39;</span>
<span class="c1"># or</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">drm</span><span class="o">=</span><span class="s1">&#39;sudo docker rm -v $(sudo docker ps -aq -f status=exited)&#39;</span>

<span class="c1"># on macOS the volume mountpoint (/var/lib/docker/volumes/) is in the VM that Docker Desktop uses to provide the Linux environment.</span>
<span class="c1"># You can read it through a container given extended privileges. </span>
<span class="c1"># Use: </span>
<span class="c1"># - the &quot;host&quot; PID namespace, </span>
<span class="c1"># - an image e.g. debian, </span>
<span class="c1"># - the nsenter command to run a program (sh) in a different namespace</span>
<span class="c1"># - the target process with PID 1</span>
<span class="c1"># - enter following namspaces of the target process: mount, UTS, network, IPC.</span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--privileged<span class="w"> </span>--pid<span class="o">=</span>host<span class="w"> </span>debian<span class="w"> </span>nsenter<span class="w"> </span>-t<span class="w"> </span><span class="m">1</span><span class="w"> </span>-m<span class="w"> </span>-u<span class="w"> </span>-n<span class="w"> </span>-i<span class="w"> </span>sh
</code></pre></div></p>
<p>If you want to build <a href="https://docs.docker.com/build/building/multi-platform/#getting-started">multi-platform</a> docker images:
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>buildx<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>mybuilder<span class="w"> </span>--driver<span class="w"> </span>docker-container<span class="w"> </span>--bootstrap
docker<span class="w"> </span>buildx<span class="w"> </span>use<span class="w"> </span>mybuilder

docker<span class="w"> </span>buildx<span class="w"> </span>inspect
docker<span class="w"> </span>buildx<span class="w"> </span>ls
</code></pre></div></p>
<p>Docker Compose. Multi-container deployments in a compose.yaml file.<br />
<a href="https://docs.docker.com/compose/production/">Using Compose in Production</a>  </p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>-p<span class="w"> </span>mastodon-bot-project<span class="w"> </span>up<span class="w"> </span>--detach
<span class="c1"># or</span>
docker<span class="w"> </span>compose<span class="w"> </span>-p<span class="w"> </span>mastodon-bot-project<span class="w"> </span>create
docker<span class="w"> </span>compose<span class="w"> </span>-p<span class="w"> </span>mastodon-bot-project<span class="w"> </span>start

<span class="c1"># connect to a running container</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>bot-app<span class="w"> </span>bash

docker<span class="w"> </span>compose<span class="w"> </span>-p<span class="w"> </span>mastodon-bot-project<span class="w"> </span>down
<span class="c1"># or</span>
docker<span class="w"> </span>compose<span class="w"> </span>-p<span class="w"> </span>mastodon-bot-project<span class="w"> </span>stop
</code></pre></div>
<p>Kubernetes</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Convert the Docker Compose file to k8s files</span>
kompose<span class="w"> </span>--file<span class="w"> </span>compose.yaml<span class="w"> </span>convert

<span class="c1"># Make sure the container image is available in a repository. </span>
<span class="c1"># You can build it with `docker build` or `docker compose create` and push it to a public repository.</span>
docker<span class="w"> </span>image<span class="w"> </span>push<span class="w"> </span>user/repo
<span class="c1"># multiple -f filenames or a folder </span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>./k8s
kubectl<span class="w"> </span>get<span class="w"> </span>pods
kubectl<span class="w"> </span>delete<span class="w"> </span>-f<span class="w"> </span>./k8s
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.top", "content.code.copy"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.cd18aaf1.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>